package gov.nih.nci.cbiit.scimgmt.gds.actions;
import org.apache.logging.log4j.LogManager;import org.apache.logging.log4j.Logger;import org.junit.Assert;import org.junit.Test;import org.junit.runner.RunWith;import org.mockito.Mock;import org.mockito.Mockito;import org.mockito.runners.MockitoJUnitRunner;import gov.nih.nci.cbiit.scimgmt.gds.constants.ApplicationConstants;import gov.nih.nci.cbiit.scimgmt.gds.domain.Project;import gov.nih.nci.cbiit.scimgmt.gds.domain.ProjectsVw;import gov.nih.nci.cbiit.scimgmt.gds.services.LookupService;import gov.nih.nci.cbiit.scimgmt.gds.services.ManageProjectService;
@RunWith(MockitoJUnitRunner.class)
public class ManageSubmissionTest {	static Logger logger = LogManager.getLogger(ManageSubmissionTest.class);		Project project;		@Mock	LookupService lookupService;		@Test	public void testGetProjectStatusCode(){				//CacheManager singletonManager = CacheManager.create();		//Cache memoryOnlyCache = new Cache("lookupLists", 5000, false, true, 5, 2);		//singletonManager.addCache(memoryOnlyCache);		System.out.println("Starting junit for ManageSubmission");		Project project = new Project();		project.setId(1L);		ProjectsVw projectsVw = new ProjectsVw();		projectsVw.setId(1L);		projectsVw.setSubprojectFlag(ApplicationConstants.FLAG_NO);		projectsVw.setProjectStatusCode(ApplicationConstants.PAGE_STATUS_CODE_IN_PROGRESS);		ManageProjectService manageProjectServiceMock = Mockito.mock(ManageProjectService.class);		Mockito.when(manageProjectServiceMock.findProjectsVwById(1L)).thenReturn(projectsVw);		System.out.println("Setup mock for manageProjectService: ");				ManageSubmission manageSubmission = new ManageSubmission();		manageSubmission.manageProjectService = manageProjectServiceMock;		//Test case - 1: If DB has no rows, return INPROGRESS		String projectStatus = manageSubmission.getProjectStatusCode(project.getId());		System.out.println("projectStatus for test 1: " + projectStatus);		Assert.assertEquals(ApplicationConstants.PAGE_STATUS_CODE_IN_PROGRESS, projectStatus);				//Test case 2: If not sub-project, return INPROGRESS, if all rows except GDSPlan info are COMPLETED				projectsVw.setIcPageStatusCode(ApplicationConstants.PAGE_STATUS_CODE_COMPLETED);		projectsVw.setBsiPageStatusCode(ApplicationConstants.PAGE_STATUS_CODE_COMPLETED);		projectsVw.setRepositoryPageStatusCode(ApplicationConstants.PAGE_STATUS_CODE_COMPLETED);		projectsVw.setSubprojectFlag(ApplicationConstants.FLAG_NO);		projectStatus = manageSubmission.getProjectStatusCode(project.getId());		System.out.println("projectStatus for test 2: " + projectStatus);				Assert.assertEquals(ApplicationConstants.PAGE_STATUS_CODE_IN_PROGRESS, projectStatus);				//Test case3: If subproject, return COMPLETED, if all rows except GDSPlan info are COMPLETED		projectsVw.setSubprojectFlag(ApplicationConstants.FLAG_YES);		projectsVw.setProjectStatusCode(ApplicationConstants.PAGE_STATUS_CODE_COMPLETED);		projectStatus = manageSubmission.getProjectStatusCode(project.getId());		Assert.assertEquals(ApplicationConstants.PAGE_STATUS_CODE_COMPLETED, projectStatus);		System.out.println("projectStatus for test 3: " + projectStatus);			}}
